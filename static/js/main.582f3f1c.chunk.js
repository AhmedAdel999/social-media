(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{72:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),c=a.n(n),r=a(21),i=a.n(r),o=a(6),l=a(2),u=a.n(l),m=a(5),d="LOGIN_SUCCESS",j="LOGIN_FAIL",b="REGISTER_SUCCESS",p="REGISTER_FAIL",h="SET_ALERT",O="REMOVE_ALERT",x="LOG_OUT",f="USER_LOAD_FAIL",v="USER_LOAD_SUCCESS",g=a(4),N=a.n(g),y=function(e){localStorage.setItem("token",e)},w=function(e){localStorage.setItem("userName",e)},A=a(74),k=function(e,t){return function(a){var s=Object(A.a)();a({type:h,payload:{msg:e,type:t,id:s}}),setTimeout((function(){a({type:O,payload:s})}),3e3)}},S=function(){return function(e){localStorage.getItem("token")?(N.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),e({type:v,payload:{token:localStorage.getItem("token"),userName:localStorage.getItem("userName")}})):e({type:f})}},E=a(8),C=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,userName:e.user.userName}}),{logOut:function(){return function(e){localStorage.token&&localStorage.removeItem("token"),localStorage.userName&&localStorage.removeItem("userName"),e({type:x})}}})((function(e){var t=e.isAuthenticated,a=e.logOut,n=e.userName;return Object(s.jsx)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",style:{background:"#0D335D"},children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"navbar-brand",children:[Object(s.jsx)(o.b,{className:"navbar-item",to:"/home",children:Object(s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAP7SURBVHgB1VnNbtNMFL13Yicp+vgUdq2gUtixYEGfgLwBeYNmCxJq+BNigUgWqAIJNQgQ2+QNwhukT1BgwxILEHTXCFo1jZO53OvgNM2PndhjWo4Uua4mnnPse+bMjRESQP7VXgExVQLEG3KOCpu641adOxccMAwEg/CIK+sJX7UwdQBBi1Sv6ty80AJDMCIg/+ZnCQHXZxKfnNYhgIpz678GxERkAfmtvZzKWhukocxXyUEkDITAkbsdtbwWFmCG+AQNBxFaUXwyt4ChMRWXSoJAxPoiQkIFhBozKcxp+KkCpEwgnSouZsykEGz4EwKSqW9TmG54T8DZJj4GgvZoMOLl1z/rSRszKYjhFfHyxbIc+OdAjmajDz0gacqa1vHUTRsMYtKgoercPt+S84lVKP/qVwFSNNganCGME/cxMwfyb/fyQKnKqQohahNiA7BX4zxwpg0JDbLVFz9KKbS3IG3nUCn4GyC+3dDt8h+9onN3+V3Q2KkCcpXPufMZu8gb+XUEKgwH22nADH8SEkL9PpDreh+pmT9weMLKl4cr4UEmxP/PZjcAdFlOZ8wzEGJbgJYFJkC9HtDRkScgAJ6Qrobt3UcrzpDLIsTHIU8CMxkWY0MUeHebSyWE+Dja/GyaLqmqCMHVzW91DoR4RmUhioUAPxG+VuBQv761V+MEccDfrksxt0AeTxxoDfrwEPTBAR87QHw+MRmTlTLR+/ug+RiXPIN7CHUcZPwkuAkHNi0WwAB8nwhRr8b5Y4A033Vq8c2ofnu02vLmGR9wafNrgStbflE4W0E2RtzH7CDb/JHX0K+cspA2l2dDoVVzRlaeUYQG2cXHn0qo7C1Mp3OYSsHfgHhIfMJlV/z+9EqEICvv5LK2dGRwoiNT6QyopSVISogsp7rDi0D3aLBaDcCNjKrsPr86R5Ax8XNpi/OAyhSQByJE1n8Vcf0fh+Y8kFWMem7QME8IoLu9+2zN8f+JixAfhzwJlV0aZEAU4pIHcseDiZ+cU3xB0NSqXxUhuHL/Q+yOTBJZLZ3zEjlsnzSs787haJlEm5egbvF2lcOArvNpHiJCSPUP9gdbC8ue6hOTxP9c0dE40pEtP/hY4oOxjsz3iRdkst9xu0aIDxobLp8Xay05n1iFlu/tcEemzmhHdkzcx8wcWH64wx2ZOtWOjEubOzJoEOja6MpzckwIRAj2ocg7zo04PlkEQpx/cXjZcXWtXVtrB49dAOITRHqSnBB8z26vH7q6EUZ8+A2IANOGn1Xf8yDWG5qLD3au9VGVY/ikyduHl1GI+zDyisk3PEfYDQLMBU84f33PA6Mv+TwhOlWY5hPTxI+vmxBGfMJNODU7Xf3OJHEfvwEIbSFam8+c1wAAAABJRU5ErkJggg==",alt:"Placeholder logo",className:"mr-1"})}),Object(s.jsxs)(o.b,{onClick:function(){document.querySelector(".navbar-brand").classList.toggle("is-active"),document.querySelector(".navbar-menu").classList.toggle("is-active")},role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",style:{color:"#fff"},children:[Object(s.jsx)("span",{"aria-hidden":"true"}),Object(s.jsx)("span",{"aria-hidden":"true"}),Object(s.jsx)("span",{"aria-hidden":"true"})]})]}),Object(s.jsxs)("div",{className:"navbar-menu",style:{background:"#0D335D"},children:[Object(s.jsxs)("div",{className:"navbar-start",children:[Object(s.jsx)("div",{className:"navbar-item",children:Object(s.jsx)(o.b,{to:"/home",className:"has-text-white",children:"Home"})}),Object(s.jsx)("div",{className:"navbar-item",children:Object(s.jsx)(o.b,{to:"/communities",className:"has-text-white",children:"Communities"})})]}),Object(s.jsx)("div",{className:"navbar-end",children:Object(s.jsx)("div",{className:"navbar-item",children:t?Object(s.jsxs)("div",{className:"buttons",children:[Object(s.jsx)(o.b,{to:"/u/".concat(n),className:"button is-primary",children:"Dashboard"}),Object(s.jsx)("button",{onClick:a,className:"button is-danger",children:"Log out"})]}):Object(s.jsxs)("div",{className:"buttons",children:[Object(s.jsx)(o.b,{to:"/signup",className:"button is-primary",children:"Sign Up"}),Object(s.jsx)(o.b,{to:"/login",className:"button is-light",children:"Log in"})]})})})]})]})})})),I=a(9),D=a(3),U=function(e){var t=e.community;return Object(s.jsx)("div",{className:"tile is-parent is-4",children:Object(s.jsxs)("div",{className:"box tile is-child has-background-grey-light",children:[Object(s.jsx)(o.b,{className:"is-size-3",to:"/community/".concat(t.name),children:t.title}),Object(s.jsx)("p",{children:t.description})]})})};var T=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("http://localhost:5000/communities");case 2:t=e.sent,c(t.data.communities);case 4:case"end":return e.stop()}}),e)}))),[]),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"tile is-ancestor is-flex is-flex-wrap-wrap",children:a.map((function(e){return Object(s.jsx)(U,{community:e},e.id)}))})})},L=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{setAlert:k})(Object(I.i)((function(e){var t=e.post,a=e.history,c=e.setAlert,r=e.isAuthenticated,i=Object(I.g)(),l=Object(n.useState)(0),d=Object(D.a)(l,2),j=d[0],b=d[1],p=Object(n.useState)(!1),h=Object(D.a)(p,2),O=h[0],x=h[1];Object(n.useEffect)((function(){b(t.votes),i.pathname.includes("/post/")&&x(!0)}),[]);var f=function(){var e=Object(m.a)(u.a.mark((function e(a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return c({data:"You must be logged in"},"danger"),e.abrupt("return");case 3:return e.prev=3,e.next=6,N.a.put("http://localhost:5000/vote/post/".concat(t.id,"/up"));case 6:s=e.sent,b(s.data.post.votes),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),c(e.t0.response,"danger");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(u.a.mark((function e(a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return c({data:"You must be logged in"},"danger"),e.abrupt("return");case 3:return e.prev=3,e.next=6,N.a.put("http://localhost:5000/vote/post/".concat(t.id,"/down"));case 6:s=e.sent,b(s.data.post.votes),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),c(e.t0.response,"danger");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("http://localhost:5000/delete/post/".concat(t.id));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),c(e.t0.response,"danger"),e.abrupt("return");case 9:c({data:"Post has been deleted"},"success"),a.push("/home");case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"card mt-2 has-background-grey-lighter",children:Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsxs)("div",{className:"is-flex is-flex-direction-row is-align-items-start",children:[Object(s.jsxs)("div",{className:"is-flex is-flex-direction-column is-align-items-center mr-2",children:[Object(s.jsx)("i",{className:"fa fa-arrow-up",style:{cursor:"pointer"},onClick:f}),Object(s.jsx)("p",{children:j}),Object(s.jsx)("i",{className:"fa fa-arrow-down",style:{cursor:"pointer"},onClick:v})]}),Object(s.jsxs)("div",{className:"is-flex is-flex-direction-column",children:[Object(s.jsx)(o.b,{to:"/post/".concat(t.id),className:"is-size-4 mb-1 has-text-dark has-text-weight-bold",children:t.title}),Object(s.jsxs)("div",{className:"is-flex",children:[Object(s.jsxs)(o.b,{to:"/u/".concat(t.user_name),className:"is-size-7 mr-2 has-text-dark",children:[Object(s.jsx)("i",{className:"fa fa-user"})," ",t.user_name]}),Object(s.jsxs)(o.b,{to:"/community/".concat(t.community_name),className:"is-size-7 mr-2 has-text-dark",children:[Object(s.jsx)("i",{className:"fa fa-align-justify"})," ",t.community_name]}),Object(s.jsxs)(o.b,{to:"/post/".concat(t.id),className:"is-size-7 mr-2 has-text-dark",children:[Object(s.jsx)("i",{className:"fa fa-comment"})," "+t.comments_count," ",t.comments_count>1?"Comments":"Comment"]})]}),Object(s.jsx)("div",{className:"content is-size-5 mt-3",children:t.post_body})]})]}),O?Object(s.jsx)("button",{class:"delete is-medium",onClick:g,style:{position:"absolute",top:10,right:10}}):""]})})}))),R=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{loadUser:S})((function(e){var t=e.loadUser,a=e.isAuthenticated,c=Object(n.useState)([]),r=Object(D.a)(c,2),i=r[0],o=r[1];return Object(n.useEffect)(Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,N.a.get("http://localhost:5000/home");case 3:a=e.sent,o(a.data.posts);case 5:case"end":return e.stop()}}),e)}))),[]),a?Object(s.jsx)("div",{className:"container p-4",children:i.length?i.map((function(e){return Object(s.jsx)(L,{post:e})})):Object(s.jsx)("p",{className:"title",children:"You are up to date"})}):Object(s.jsx)(I.a,{to:"login"})})),z=a(16),P=a(10),_=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{login:function(e){var t=e.email,a=e.password;return function(){var e=Object(m.a)(u.a.mark((function e(s){var n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},c={email:t,password:a},e.prev=2,r=JSON.stringify(c),e.next=6,N.a.post("http://localhost:5000/login",r,n);case 6:i=e.sent,s({type:d,payload:i.data}),y(i.data.token),w(i.data.user_name),s(S()),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),s(k(e.t0.response,"danger")),s({type:j});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,c=Object(n.useState)({email:"",password:""}),r=Object(D.a)(c,2),i=r[0],l=r[1],u=Object(n.useState)(""),m=Object(D.a)(u,2),d=m[0],j=m[1],b=Object(n.useState)(""),p=Object(D.a)(b,2),h=p[0],O=p[1],x=i.email,f=i.password;if(a)return Object(s.jsx)(I.a,{to:"/home"});var v=function(e){e.preventDefault(),l(Object(P.a)(Object(P.a)({},i),{},Object(z.a)({},e.target.name,e.target.value)))},g=function(e,t){return RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i).test(e)?t.length<6?(O("Password must be 6 characters minimum."),0):1:(j("Type a valid email address."),0)};return Object(s.jsxs)("div",{className:"container is-max-desktop mt-4 p-4",children:[Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(x,f)&&t({email:x,password:f})},noValidate:!0,children:[Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"email",className:"label",children:"Email"}),Object(s.jsx)("div",{className:"control",children:Object(s.jsx)("input",{className:"input",type:"email",name:"email",placeholder:"Enter your email address",value:x,onChange:v})}),d?Object(s.jsx)("p",{className:"help has-text-danger",children:d}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(s.jsx)("input",{className:"input",type:"password",name:"password",placeholder:"Enter your password",value:f,onChange:v}),h?Object(s.jsx)("p",{className:"help has-text-danger",children:h}):null]}),Object(s.jsx)("button",{className:"button is-success",children:"Login"})]}),Object(s.jsxs)("p",{children:["Don't have an account? ",Object(s.jsx)(o.b,{to:"/signup",children:"Sign Up"})]})]})})),J=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{register:function(e){var t=e.firstName,a=e.lastName,s=e.userName,n=e.email,c=e.password;return function(){var e=Object(m.a)(u.a.mark((function e(r){var i,o,l,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={headers:{"Content-Type":"application/json"}},o={first_name:t,last_name:a,user_name:s,email:n,password:c},e.prev=2,l=JSON.stringify(o),e.next=6,N.a.post("http://localhost:5000/signup",l,i);case 6:m=e.sent,r({type:b,payload:m.data}),y(m.data.token),w(m.data.user_name),r(S()),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),r(k(e.t0.response,"danger")),r({type:p});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.register,a=e.isAuthenticated,c=Object(n.useState)({firstName:"",lastName:"",userName:"",email:"",password:""}),r=Object(D.a)(c,2),i=r[0],l=r[1],u=Object(n.useState)(""),m=Object(D.a)(u,2),d=m[0],j=m[1],b=Object(n.useState)(""),p=Object(D.a)(b,2),h=p[0],O=p[1],x=Object(n.useState)(""),f=Object(D.a)(x,2),v=f[0],g=f[1],N=Object(n.useState)(""),y=Object(D.a)(N,2),w=y[0],A=y[1],k=Object(n.useState)(""),S=Object(D.a)(k,2),E=S[0],C=S[1],U=i.firstName,T=i.lastName,L=i.userName,R=i.email,_=i.password;if(a)return Object(s.jsx)(I.a,{to:"/home"});var J=function(e){l(Object(P.a)(Object(P.a)({},i),{},Object(z.a)({},e.target.name,e.target.value)))},F=function(e,t,a,s,n){return e.length?t.length?a.length?RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i).test(s)?!(n.length<6)||(C("Password must be 6 characters minimum."),!1):(A("Type a valid email address."),!1):(g("User name is required"),!1):(O("Last name is required"),!1):(j("First name is required"),!1)};return Object(s.jsxs)("div",{className:"container is-max-desktop mt-4 p-4",children:[Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F(U,T,L,R,_)&&t({firstName:U,lastName:T,userName:L,email:R,password:_})},noValidate:!0,children:[Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"firstName",className:"label",children:"First Name"}),Object(s.jsx)("input",{className:"input",type:"text",name:"firstName",placeholder:"Enter your first name",value:U,onChange:J}),d?Object(s.jsx)("p",{className:"has-text-danger help",children:d}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"lastName",className:"label",children:"Last Name"}),Object(s.jsx)("input",{className:"input",type:"text",name:"lastName",placeholder:"Enter your last name",value:T,onChange:J}),h?Object(s.jsx)("p",{className:"has-text-danger help",children:h}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"userName",className:"label",children:"User Name"}),Object(s.jsx)("input",{className:"input",type:"text",name:"userName",placeholder:"Enter your User Name",value:L,onChange:J}),v?Object(s.jsx)("p",{className:"has-text-danger help",children:v}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"email",className:"label",children:"Email"}),Object(s.jsx)("input",{className:"input",type:"email",name:"email",placeholder:"Enter your email address",value:R,onChange:J}),w?Object(s.jsx)("p",{className:"has-text-danger help",children:w}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(s.jsx)("input",{className:"input",type:"password",name:"password",placeholder:"Enter your password",value:_,onChange:J}),E?Object(s.jsx)("p",{className:"has-text-danger help",children:E}):null]}),Object(s.jsx)("button",{className:"button is-success",children:"Sign Up"})]}),Object(s.jsxs)("p",{children:["Have an account? ",Object(s.jsx)(o.b,{to:"/login",children:"Login"})]})]})})),F=Object(E.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return Object(s.jsx)("div",{className:"container is-max-desktop p-4",children:null!==t&&t.length>0&&t.map((function(e){return Object(s.jsx)("div",{className:"notification is-danger",children:e.msg.data},e.id)}))})})),B=a.p+"static/media/spinner.5b18dcd8.gif",H=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],c=t[1],r=Object(I.h)().name;return Object(n.useEffect)(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("http://localhost:5000/u/".concat(r,"/posts"));case 2:t=e.sent,c(t.data.posts);case 4:case"end":return e.stop()}}),e)}))),[r]),Object(s.jsx)("div",{children:a.length?a.map((function(e){return Object(s.jsx)(L,{post:e},e.id)})):Object(s.jsx)("p",{children:"There are no posts here!"})})},M=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{setAlert:k})(Object(I.i)((function(e){var t=e.comment,a=e.isAuthenticated,c=e.setAlert,r=(e.history,Object(n.useState)(0)),i=Object(D.a)(r,2),l=i[0],d=i[1],j=Object(n.useState)(!1),b=Object(D.a)(j,2),p=b[0],h=b[1],O=Object(I.g)(),x=Object(I.h)().id;Object(n.useEffect)((function(){console.log("Yay"),d(t.votes),O.pathname.includes("/post/")&&h(!0)}),[]);var f=function(){var e=Object(m.a)(u.a.mark((function e(s){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return c({data:"You must be logged in"},"danger"),e.abrupt("return");case 3:return e.prev=3,e.next=6,N.a.put("http://localhost:5000/vote/comment/".concat(t.id,"/up"));case 6:n=e.sent,d(n.data.votes),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),c(e.t0.response,"danger");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(u.a.mark((function e(s){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return c({data:"You must be logged in"},"danger"),e.abrupt("return");case 3:return e.prev=3,e.next=6,N.a.put("http://localhost:5000/vote/comment/".concat(t.id,"/down"));case 6:n=e.sent,d(n.data.votes),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),c(e.t0.response,"danger");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("http://localhost:5000/delete/comment/".concat(x,"/").concat(t.id));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),c(e.t0.response,"danger");case 9:window.location.reload(!1);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"card mt-2 has-background-grey-lighter",style:{position:"relative"},children:Object(s.jsx)("div",{className:"card-content",children:Object(s.jsxs)("div",{className:"is-flex is-flex-direction-row is-align-items-start",children:[Object(s.jsxs)("div",{className:"is-flex is-flex-direction-column is-align-items-center mr-2",children:[Object(s.jsx)("i",{className:"fa fa-arrow-up",style:{cursor:"pointer"},onClick:f}),Object(s.jsx)("p",{children:l}),Object(s.jsx)("i",{className:"fa fa-arrow-down",style:{cursor:"pointer"},onClick:v})]}),Object(s.jsxs)("div",{className:"is-flex is-flex-direction-column",children:[Object(s.jsx)("div",{children:Object(s.jsxs)(o.b,{to:"/u/".concat(t.user_name),className:"is-size-7 mr-2 has-text-dark",children:[Object(s.jsx)("i",{className:"fa fa-user"})," ",t.user_name]})}),Object(s.jsx)("div",{className:"content is-size-5 mt-3",children:t.comment_body})]}),p?Object(s.jsx)("button",{class:"delete is-medium",onClick:g,style:{position:"absolute",top:10,right:10}}):""]})})})}))),G=function(){var e=Object(I.h)().name,t=Object(n.useState)([]),a=Object(D.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)(Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("http://localhost:5000/u/".concat(e,"/comments"));case 2:a=t.sent,r(a.data.comments);case 4:case"end":return t.stop()}}),t)}))),[e]),Object(s.jsx)("div",{className:"container",children:c.length?c.map((function(e){return Object(s.jsx)(M,{comment:e},e.id)})):Object(s.jsx)("p",{children:"There are no comments here!"})})};var Y=function(){var e=Object(I.h)().name,t=Object(n.useState)(!1),a=Object(D.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)([]),l=Object(D.a)(i,2),d=l[0],j=l[1];return Object(n.useEffect)(Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("http://localhost:5000/u/".concat(e,"/communities"));case 2:a=t.sent,e===localStorage.getItem("userName")&&r(!0),j(a.data.communities);case 5:case"end":return t.stop()}}),t)}))),[e]),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"tile is-ancestor is-flex is-flex-wrap-wrap",children:d.length?d.map((function(e){return Object(s.jsx)(U,{community:e},e.id)})):"You did not join any communities  yet!"}),c?Object(s.jsx)(o.b,{className:"button is-success",to:"/create-community",children:"create community"}):""]})},Q=Object(E.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=t.loading,c=t.isAuthenticated,r=Object(n.useState)("posts"),i=Object(D.a)(r,2),o=i[0],l=i[1],d=Object(n.useState)({}),j=Object(D.a)(d,2),b=j[0],p=j[1],h=Object(I.h)().name;if(Object(n.useEffect)(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("selected")&&l(localStorage.getItem("selected")),e.next=3,N.a.get("http://localhost:5000/u/".concat(h));case 3:t=e.sent,p(t.data.user);case 5:case"end":return e.stop()}}),e)}))),[h]),!c)return Object(s.jsx)(I.a,{to:"/login"});var O=function(e){"Posts"===e.target.innerText?(l("posts"),localStorage.setItem("selected","posts")):"Comments"===e.target.innerText?(l("comments"),localStorage.setItem("selected","comments")):"Communities"===e.target.innerText&&(l("communities"),localStorage.setItem("selected","communities"))};return a&&null===b?Object(s.jsx)("img",{src:B,alt:"Loading"}):Object(s.jsxs)("div",{className:"container p-4",children:[Object(s.jsx)("div",{className:"card has-background-grey-lighter",children:Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsxs)("p",{className:"title",children:[b.first_name+" "+b.last_name," "]}),Object(s.jsxs)("p",{className:"subtitle",children:["@",b.user_name]}),Object(s.jsxs)("p",{className:"subtitle",children:[Object(s.jsx)("span",{className:"has-text-weight-bold",children:"Karma: "}),b.karma]}),Object(s.jsxs)("p",{className:"subtitle",children:[Object(s.jsx)("span",{className:"has-text-weight-bold",children:"Joined at: "}),b.created_at]})]})}),Object(s.jsxs)("div",{className:"buttons mt-2",children:[Object(s.jsx)("button",{className:"button is-link",onClick:O,children:"Posts"}),Object(s.jsx)("button",{className:"button is-link",onClick:O,children:"Comments"}),Object(s.jsx)("button",{className:"button is-link",onClick:O,children:"Communities"})]}),"posts"===o?Object(s.jsx)(H,{}):"comments"===o?Object(s.jsx)(G,{}):"communities"===o?Object(s.jsx)(Y,{}):void 0]})})),V=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{setAlert:k})((function(e){var t=e.setAlert,a=e.history,c=e.isAuthenticated,r=Object(n.useState)({name:"",description:"",topic:""}),i=Object(D.a)(r,2),o=i[0],l=i[1];c||a.push("/login");var d=o.name,j=o.description,b=o.topic,p=Object(n.useState)(""),h=Object(D.a)(p,2),O=h[0],x=h[1],f=Object(n.useState)(""),v=Object(D.a)(f,2),g=v[0],y=v[1],w=Object(n.useState)(""),A=Object(D.a)(w,2),k=A[0],S=A[1],E=function(e){l(Object(P.a)(Object(P.a)({},o),{},Object(z.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(m.a)(u.a.mark((function e(s){var n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),d.length){e.next=4;break}return x("Name must be provided"),e.abrupt("return");case 4:if(j.length){e.next=7;break}return y("Description must be provided"),e.abrupt("return");case 7:if(b.length){e.next=10;break}return S("Topic must be provided"),e.abrupt("return");case 10:return n={headers:{"Content-Type":"application/json"}},e.prev=11,c=JSON.stringify(o),e.next=15,N.a.post("http://localhost:5000/create/community",c,n);case 15:r=e.sent,a.push("/community/".concat(r.data.community.name)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),t(e.t0.response,"danger");case 22:case"end":return e.stop()}}),e,null,[[11,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"container is-max-desktop mt-4 p-4",children:Object(s.jsxs)("form",{onSubmit:C,children:[Object(s.jsx)("h2",{className:"title",children:"Create Community"}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"name",className:"label",children:"Name"}),Object(s.jsx)("input",{className:"input",type:"text",name:"name",placeholder:"Enter name of community",value:d,onChange:E}),O?Object(s.jsx)("p",{className:"help has-text-danger",children:O}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"description",className:"label",children:"Description"}),Object(s.jsx)("input",{className:"input",type:"text",name:"description",placeholder:"Enter desciption of community",value:j,onChange:E}),g?Object(s.jsx)("p",{className:"help has-text-danger",children:g}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"name",className:"label",children:"Topic"}),Object(s.jsx)("input",{className:"input",type:"text",name:"topic",placeholder:"Enter topic of community",value:b,onChange:E}),k?Object(s.jsx)("p",{className:"help has-text-danger",children:k}):null]}),Object(s.jsx)("button",{className:"button is-success",children:"Create Community"})]})})})),X=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.history,a=e.isAuthenticated,c=Object(n.useState)({title:"",body:""}),r=Object(D.a)(c,2),i=r[0],o=r[1],l=Object(I.h)().name,d=i.title,j=i.body,b=Object(n.useState)(""),p=Object(D.a)(b,2),h=p[0],O=p[1],x=Object(n.useState)(""),f=Object(D.a)(x,2),v=f[0],g=f[1];if(!a)return Object(s.jsx)(I.a,{to:"/login"});var y=function(e){o(Object(P.a)(Object(P.a)({},i),{},Object(z.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(m.a)(u.a.mark((function e(a){var s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),d.length){e.next=4;break}return O("Title must be provided"),e.abrupt("return");case 4:if(j.length){e.next=7;break}return g("Body must be provided"),e.abrupt("return");case 7:return s={headers:{"Content-Type":"application/json"}},n=JSON.stringify({post_body:j,title:d}),e.next=11,N.a.post("http://localhost:5000/create/post/community/".concat(l),n,s);case 11:e.sent,t.push("/community/".concat(l));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"container is-max-desktop mt-4 p-4",children:Object(s.jsxs)("form",{onSubmit:w,children:[Object(s.jsx)("h2",{className:"title",children:"Create Post"}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"name",className:"label",children:"Title"}),Object(s.jsx)("input",{className:"input",type:"text",name:"title",placeholder:"Enter post title",value:d,onChange:y}),h?Object(s.jsx)("p",{className:"help has-text-danger",children:h}):null]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"body",className:"label",children:"Body"}),Object(s.jsx)("textarea",{className:"textarea",name:"body",cols:"10",rows:"5",placeholder:"Enter the post",value:j,onChange:y}),v?Object(s.jsx)("p",{className:"help has-text-danger",children:v}):null]}),Object(s.jsx)("button",{className:"button is-success",children:"Create Post"})]})})})),K=a(17),q=a(40),W=a(41),Z={isAuthenticated:null,token:null,userName:null,loading:!0},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,a=t.type,s=t.payload;switch(a){case b:case d:return Object(P.a)(Object(P.a)({},e),{},{token:s.token,userName:s.user_name,isAuthenticated:!0,loading:!1});case v:return Object(P.a)(Object(P.a)({},e),{},{token:s.token,isAuthenticated:!0,loading:!1,userName:s.userName});case p:case j:case x:return Object(P.a)(Object(P.a)({},e),{},{isAuthenticated:!1,token:null,loading:!1,userName:null});case f:return Object(P.a)(Object(P.a)({},e),{},{isAuthenticated:!1,loading:!1,userName:null});default:return e}},ee=a(24),te=[],ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=t.type,s=t.payload;switch(a){case h:return[].concat(Object(ee.a)(e),[s]);case O:return e.filter((function(e){return e.id!==s}));default:return e}},se=Object(K.combineReducers)({user:$,alert:ae}),ne=[W.a],ce=Object(K.createStore)(se,{},Object(q.composeWithDevTools)(K.applyMiddleware.apply(void 0,ne))),re=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{setAlert:k})((function(e){var t=e.isAuthenticated,a=e.setAlert,c=e.history,r=Object(I.h)().id,i=Object(n.useState)({}),o=Object(D.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)([]),b=Object(D.a)(j,2),p=b[0],h=b[1],O=Object(n.useState)(),x=Object(D.a)(O,2),f=x[0],v=x[1],g=function(){var e=Object(m.a)(u.a.mark((function e(t){var s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f.length){e.next=4;break}return a({data:"Comment cannot be empty"},"danger"),e.abrupt("return");case 4:return s=JSON.stringify({comment_body:f}),n={headers:{"Content-Type":"application/json"}},e.next=8,N.a.post("http://localhost:5000/create/comment/post/".concat(r),s,n);case 8:c=e.sent,v(""),h([c.data.comment].concat(Object(ee.a)(p)));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:5000/post/".concat(r));case 3:t=e.sent,d(t.data.post),h(t.data.comments),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.push("/404");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(L,{post:l}),t?Object(s.jsxs)("form",{onSubmit:g,children:[Object(s.jsx)("textarea",{className:"textarea mt-2",value:f,onChange:function(e){v(e.target.value)},name:"comment",cols:"10",rows:"5",placeholder:"Add a comment"}),Object(s.jsx)("button",{className:"button mt-2 is-link ml-0",children:"Add"})]}):"",p.map((function(e){return Object(s.jsx)(M,{comment:e},e.id)}))]})})),ie=Object(E.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}),{setAlert:k})((function(e){var t=e.isAuthenticated,a=e.history,c=e.setAlert,r=Object(n.useState)([]),i=Object(D.a)(r,2),l=i[0],d=i[1],j=Object(n.useState)({}),b=Object(D.a)(j,2),p=b[0],h=b[1],O=Object(n.useState)(!1),x=Object(D.a)(O,2),f=x[0],v=x[1],g=Object(n.useState)(!1),y=Object(D.a)(g,2),w=y[0],A=y[1],k=Object(I.h)().name;Object(n.useEffect)((function(){p.admin===localStorage.getItem("userName")&&v(!0)}),[p]),Object(n.useEffect)(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("http://localhost:5000/community/".concat(k));case 2:t=e.sent,h(t.data.community),d(t.data.posts),A(t.data.users.filter((function(e){return e===localStorage.getItem("userName")})).length>0);case 6:case"end":return e.stop()}}),e)}))),[]);var S=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("http://localhost:5000/join/community/".concat(p.name));case 2:t=e.sent,h(t.data.community),A(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("http://localhost:5000/leave/community/".concat(p.name));case 2:t=e.sent,h(t.data.community),A(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("http://localhost:5000/delete/community/".concat(p.name));case 2:c({data:"Community has been deleted"},"success"),a.push("/home");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"container is-flex is-flex-wrap-wrap",children:[Object(s.jsx)("div",{className:"is-flex-grow-1 mr-2",children:l.length?l.map((function(e){return Object(s.jsx)(L,{post:e},e.id)})):Object(s.jsx)("p",{className:"title",children:"There are no posts here!"})}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"card px-5",children:[Object(s.jsx)("h2",{className:"title",children:p.title}),Object(s.jsx)("p",{className:"subtitle",children:p.description}),Object(s.jsxs)("p",{children:["Members: ",p.members_count]}),t?f?Object(s.jsx)("button",{className:"button is-danger my-2",onClick:C,children:"Delete Community"}):w?Object(s.jsx)("button",{className:"button is-danger my-2",onClick:E,children:"Leave"}):Object(s.jsx)("button",{onClick:S,className:"button is-success my-2",children:"Join"}):""]}),t&&(w||f)?Object(s.jsx)(o.b,{className:"button button is-link mt-2",to:"/create/post/community/".concat(p.name),children:"Create Post"}):""]})]})})),oe=function(){return Object(s.jsx)("div",{className:"container",children:"Oops, looks like you are lost!"})},le=function(){return Object(n.useEffect)((function(){ce.dispatch(S())}),[]),Object(s.jsx)(E.a,{store:ce,children:Object(s.jsxs)(o.a,{children:[Object(s.jsx)(C,{}),Object(s.jsx)(F,{}),Object(s.jsxs)(I.d,{children:[Object(s.jsx)(I.b,{path:"/communities",exact:!0,component:T}),Object(s.jsx)(I.b,{path:"/home",exact:!0,component:R}),Object(s.jsx)(I.b,{path:"/login",exact:!0,component:_}),Object(s.jsx)(I.b,{path:"/signup",exact:!0,component:J}),Object(s.jsx)(I.b,{path:"/create-community",exact:!0,component:V}),Object(s.jsx)(I.b,{path:"/u/:name",exact:!0,component:Q}),Object(s.jsx)(I.b,{path:"/post/:id",exact:!0,component:re}),Object(s.jsx)(I.b,{path:"/community/:name",exact:!0,component:ie}),Object(s.jsx)(I.b,{path:"/create/post/community/:name",exact:!0,component:X}),Object(s.jsx)(I.b,{path:"/404",exact:!0,component:oe})]})]})})};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(le,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.582f3f1c.chunk.js.map